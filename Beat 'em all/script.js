function lookData() {
  this.user = document.getElementById("username").value;
  this.password = MD5(document.getElementById("password").value.toLowerCase());
  this.islandName = document.getElementById("island").value;
  document.getElementById("status2").innerHTML = "<p style='font-weight:bold;color=#0000FF;'>Loading...</p>";
  submit();
  $.ajax({ 
    type: "POST",
    url: "https://pop-proxy-2020.herokuapp.com/https://www.poptropica.com/login.php",
    data: {
      login: this.user,
      pass_hash: this.password
    },
    dataType: "text",
    success: function(res) {
      if(res.includes("ok")){
        document.getElementById("status2").innerHTML = "<p style='font-weight:bold;color=#0000FF;'>Login successful!</p>";
        complete();
			} else {
        document.getElementById("status2").innerHTML = "<p style='font-weight:bold;color=#0000FF;'>Incorrect login :(</p>";
      }
    },
    error: function() {
        document.getElementById("status2").innerHTML = "<p style='font-weight:bold;color=#0000FF;'>Something went wrong :(</p>";
    },
  });
};


function inject() {
  // Getting card
  document.getElementById("status2").innerHTML = "<p style='font-weight:bold;color=#0000FF;'>Trying to get Item card...</p>";
  console.log("calling add_item");

  $.ajax({
    type: "POST",
    //headers : {'Access-Control-Allow-Origin': '*'},
    url: "https://pop-proxy-2020.herokuapp.com/https://www.poptropica.com/add_item.php",
    data: {
      login: this.user,
      pass_hash: this.password,      
      dbid: 5,

      item_id: this.islandName,
    },
    dataType: "text",
    success: function(res) {
      if(res.includes("item-already-there")) {
        document.getElementById("status2").innerHTML = "<p style='font-weight:bold;color=#0000FF;'>You already have completed that island. Restart that island and try again.</p>";

      } else {
      console.log(res)
      document.getElementById("status2").innerHTML = "<p style='font-weight:bold;color=#0000FF;'>It worked!!!</p>";
      };
    },
    error: function(res) {
      console.log(res)
      document.getElementById("status2").innerHTML = "<p style='font-weight:bold;color=#0000FF;'>Something went wrong. Please try again.</p>";
    },
  });
};

function complete() {
  // Getting medalions :D
  var islandIDTransalator = {
  1001 : "Early",//Early Poptropica
  1002 : "Shark", // Shark Tooth
  1003 : "Time", //Time Tangled
  1004 : "Carrot", // 24 Carrot (old)
  1005 : "Super", // Super Power
  1006 : "Spy", // Spy
  1007 : "Nabooti", //Nabooti
  1008 : "BigNate", // Big Nate
  1009 : "Astro", // AstroKnights
  1010 : "Counter", //Counterfeit
  1011 : "Reality", //Reality
  1012 : "Myth_as3", //Mythology
  1013 : "Trade", //Skulldegerry 
  1014 : "Steam", //Steamworks
  1015 : "Peanuts", // Great Pumpkin
  1016 : "Cryptid", //Cryptids
  1017 : "West", //Wild West
  1018 : "Wimpy", //Wimpy Wonderland
  1019 : "Japan", //Red Dragon
  1020 : "Shrink_as3", //Shrink Ray 
  1021 : "Train", // Mystery Train
  1022 : "GameShow", // Game Show 
  1023 : "Ghost", //Ghost Story
  1024 : "Shipwreck", // S.O.S.
  1025 : "Vampire", // Vampire's Curse
  1026 : "Woodland", // Twisted Thicket
  1027 : "Poptropolis_as3", // Poptropolis Games
  1028 : "Boardwalk", // Wimpy Boardwalk
  1029 : "Moon", // Lunar Colony
  1030 : "Villain", // Supor Villain
  1031 : "Charlie", //Charlie and the Chocolate Factory
  1032 : "Zombie", // Zomberry
  1033 : "NightWatch", // Night Watch
  1034 : "Backlot", //Backlot
  1035 : "Carrot_as3", // 24 Carrot (new)
  1036 : "VirusHunter_as3", // Virus HUnter
  1037 : "Mocktropica_as3", // Mocktropica
  1038 : "Carnival_as3", // Monster Carnival
  1039 : "Survival1_as3", // Survival 1
  1040 : "DeepDive1_as3", // Mission Atlantis 1
  1041 : "Survival2_as3", // Survival 2
  1042 : "DeepDive2_as3", // Mission Atlantis 2
  1043 : "Survival3_as3", // Survival 3
  1044 : "Survival4_as3", // Survival 4
  1045 : "DeepDive3_as3", // Mission Atlantis 3
  1046 : "Con1_as3", // PoptropiCon 1
  1047 : "Survival5_as3", // Survival 5
  1048 : "Arab1_as3", // Arabian Nights 1
  1049 : "Con2_as3", // PoptropiCon 2
  1050 : "Arab2_as3", // Arabian Nights 2
  1051 : "GHD_as3", // Galactic Hot dogs
  1052 : "Con3_as3", // PoptropiCon 3
  1053 : "Viking_as3", // Mystery of the Map
  1054 : "Arab3_as3", // Arabian Nights 3
  1055 : "Hub_as3", // Super Old tutorial island (Home/Hub island)
  1056 : "Timmy_as3", // Timmy Failiure
  1057 : "Prison_as3", // Escape From Pelican Rock
  1058 : "ftue_as3", //monkey wrench. weird, right?
  1059 : "LegendarySwords", // Legendary Swords (not a real island)
  1060 : "Reality2_as3", // Reality TV Wildlife Safari (super dumb)
  1061 : "Fairytale_as3", // Fairytale Island
  1062 : "Goofball_as3" // Goofball Island
  };
  var count = 0;
  islandToComplete = islandIDTransalator[this.islandName]
  if(islandToComplete == undefined) {
    document.getElementById("status2").innerHTML = "<p style='font-weight:bold;color=#0000FF;'>Invalid ID. Please enter the ID from 1001 - 1060.</p>";
    var count = 1;
    return;
  };
  var islandsVal = {};
  islandsVal[islandToComplete] = null;
  document.getElementById("status2").innerHTML = "<p style='font-weight:bold;color=#0000FF;'>Trying to get Medallions...</p>";
  console.log("calling add_item");
  $.ajax({
    type: "POST",
    //headers : {'Access-Control-Allow-Origin': '*'},
    url: "https://pop-proxy-2020.herokuapp.com/https://www.poptropica.com/finished_islands.php",
    data: {
      login: this.user,
      pass_hash: this.password,      
      dbid: 5,
      islands: islandsVal
    },
    dataType: "text",
    success: function(res) {
      if(count == 1) {
        document.getElementById("status2").innerHTML = "<p style='font-weight:bold;color=#0000FF;'>Invalid ID. Please enter the ID from 1001 - 1060.</p>";
      console.log(data)
      } else {
      console.log(res)
      document.getElementById("status2").innerHTML = "<p style='font-weight:bold;color=#0000FF;'>It worked!!!</p>";
      };
      inject();
    },
    error: function(res) {
      console.log(res)
      document.getElementById("status2").innerHTML = "<p style='font-weight:bold;color=#0000FF;'>Something went wrong. Please try again.</p>";
    },
  });
};
function submit() { 
 document.getElementById("enter").reset(); 
 document.getElementById('Beatemall').disabled = true;
} 
function checkForm()
    {
        var f = document.forms["enter"].elements;
        var cansubmit = true;

        for (var i = 0; i < f.length; i++) {
            if (f[i].value.length == 0) cansubmit = false;
        }

        if (cansubmit) {
            document.getElementById('Beatemall').disabled = false;
        }
    }
